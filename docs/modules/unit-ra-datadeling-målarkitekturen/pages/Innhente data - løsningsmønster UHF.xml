<?xml version="1.0" encoding="UTF-8"?>
<?asciidoc-toc maxdepth="4"?>
<?asciidoc-numbered maxdepth="9"?>
<article xmlns="http://docbook.org/ns/docbook" xmlns:xl="http://www.w3.org/1999/xlink" version="5.0" xml:lang="en">
<info>
<title>Innhente data - løsningsmønster UHF</title>
<date>2021-02-17</date>
</info>
<simpara>En prosessflyt en konsument utfører når det utføres et tjenestekall for å innhente data gjennom et API. API-adressen hentes i API-katalogen. Tilgang til APIet byttes inn mot et kjøretids-token i autoriseringstjenesten. Tjenestekall til APIet utføres gjennom API gateway der tokenet benyttes for å få tilgang. Dersom det er et åpent API er det kun relevante prossessteg som utføres.</simpara>
<figure>
<title>Innhente data - løsningsmønster UHF</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/Innhente%20data%20-%20løsningsmønster%20UHF.png"/>
</imageobject>
<textobject><phrase>Innhente data - løsningsmønster UHF image</phrase></textobject>
</mediaobject>
</figure>
<table frame="all" rowsep="1" colsep="1">
<title>Elementer i view for Innhente data - løsningsmønster UHF</title>
<tgroup cols="2">
<colspec colname="col_1" colwidth="25*"/>
<colspec colname="col_2" colwidth="75*"/>
<thead>
<row>
<entry align="left" valign="top">Element</entry>
<entry align="left" valign="top">Beskrivelse</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>UHF Infrastruktur &lt;grouping&gt;</simpara></entry>
<entry align="left" valign="top"></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Datautvekslings-tjeneste &lt;application-service&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Tjeneste for utveksling av data over aktuell transportprotokoll, f.eks, gjennom asynkrone medlinger eller synkrone API-oppslag.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Samtykkeregistererings-tjeneste &lt;application-service&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Tjeneste for å innhente samtykke fra den registrert som dataene gjelder. Dette kan være en person eller en virksomhet.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Adressetjeneste &lt;application-service&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Tjeneste som gir mulighet til å slå opp teknisk endepunkt</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Virksomhetssertifikat &lt;data-object&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>En virksomhets elektroniske ID. Benyttes for å autentisere virksomheten overfor tokentjenesten.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Tokentjeneste &lt;application-service&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Tjeneste som utsteder sikkerhetsbilletter. Sikkerhetsbillett utstedes basert på tildelte rettigheter og eventuelle representasjonsforhold.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Oppslag representasjons-forhold &lt;application-service&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Tjeneste som benyttes av tokentjenesten for å kontrollere om det foreligger et delegert representasjonsforhold fra konsument til leverendør i autorisasjonstjenesten til Altinn.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Tilganger konsument &lt;data-object&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Oversikt over tilganger gitt til konsumenter utenfor UHF sektoren tildelt gjennom Maskinporten. Oversikten spesifiserer hvilke API og OAUTH-scopes en virksomhet (representert ved organisasjonsnummer) skal ha tilgang til (utstedt token for).</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>UH/F Oauth2 autorisasjonstjener &lt;application-component&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Autorisasjonstjenester realiserer tilgangskontroll gjennom å utstede OAuth 2 grants og tokens.
En autorisasjonstjener er også brukt til å realisere tilgangs policy.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>UH/F API katalog &lt;application-component&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Oversikt over alle API som er registrert i UH/F sektoren</simpara><simpara>UH/F API katalog kan inneholde</simpara><simpara>  * Navn på API
  * Tekstlig beskrivelse av API
  * Informasjonsmodell / Datamodell for API som tilbys
  * Kildeinformasjon for data, begrepsinformasjon
  * Informasjon om tilgang, juridiske og tekniske begrensinger for bruk
  * Eksempelkode, interaktiv API-konsoll og sandkasse for test
  * Informasjon om hvordan få support og hjelp fra utsteder</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Endepunkt (adresse) &lt;data-object&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Dataobjekt som representerer teknisk adresse til et API eller ressurs.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Nasjonal Infrastruktur &lt;grouping&gt;</simpara></entry>
<entry align="left" valign="top"></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Maskinporten &lt;application-component&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>[Torget]
Maskinporten er en løsning for tilgangsstyring for virksomheter som utveksler data. Løsningen garanterer identiteten mellom virksomheter, og sørger for maskin-til-maskin autentisering.</simpara><simpara>[Verktøykasse for deling av data]
Maskinporten sørger for sikker autentisering og tilgangskontroll for datautveksling mellom
virksomheter, maskin til maskin. Dette gir teknisk og organisatorisk samhandlingsevne.</simpara><simpara>Mer om Maskinporten:
<link xl:href="https://www.digdir.no/digitale-felleslosninger/maskinporten/869">https://www.digdir.no/digitale-felleslosninger/maskinporten/869</link></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Data-konsument &lt;business-role&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Den som innhenter eller mottar data fra andre aktører.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Innhente data &lt;capability&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Evnen til å innhente data fra en annen aktør.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Slå opp data gjennom et API  &lt;business-process&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Prosessen med å slå opp og hente data gjennom et API.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Hent teknisk endepunkt ved behov &lt;business-process&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Prosessen å slå opp den tekniske adressen til et API før spørring mot API-et. Gjøres kun dersom det er nødvendig.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Be om tilgangstoken &lt;business-process&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Prosessen med å benytte en sikkerhetsbillettjeneste for hente en sikkerhetsbillett som gir tilgang til et API. Dette forutsetter at alt er registert og satt opp riktig mot de aktuelle tjenestene.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Utfør tjenestekall &lt;business-process&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Prosessen med å benytte (gjøre et oppslag mot) et eksternt API.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Innhent samtykke ved behov &lt;business-process&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Prosess for å innhente samtykke fra person eller virksomhet som grunnlag for å innhente data. Dette gjøres kun ved behov.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Junction &lt;junction&gt;</simpara></entry>
<entry align="left" valign="top"></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Junction &lt;junction&gt;</simpara></entry>
<entry align="left" valign="top"></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Altinn autorisasjon &lt;application-component&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>[Torget]
Autorisasjonskomponenten i Altinn som gir muligheter til å delegere rettigheter til andre organisasjoner eller personer. Rettigheter til bruk av autorisasjonskomponenten baserer seg på registrerte roller i Enhetsregisteret.
Altinn autorisasjon leverer også tjenester for å registrere og kontrollere samtykke gitt av person eller virksomhet.</simpara><simpara>[Verktøykasse for deling av data]
Altinn autorisasjon gir teknisk samhandlingsevne ved at bruker logger inn med elektronisk ID,
autorisasjonskomponenten sjekker at bruker har de tilgangene som kreves for å ta i bruk aktuell tjeneste.</simpara><simpara>Dersom en privatperson skal ta i bruk en tjeneste på vegne av en virksomhet, gjøres det et oppslag mot Enhetsregisteret for å bekrefte at personen har en rolle på vegne av virksomheten. Dette gir organisatorisk samhandlingsevne.</simpara><simpara>Mer om Altinn autorisasjon:
<link xl:href="https://www.altinndigital.no/produkter/styring-av-tilgang/">https://www.altinndigital.no/produkter/styring-av-tilgang/</link></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Felles API-katalog &lt;application-component&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Del av Felles datakatalog som gir mulighet for å søke etter API-er og lese API-spesifikasjoner <link xl:href="https://fellesdatakatalog.brreg.no/apis">https://fellesdatakatalog.brreg.no/apis</link></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Altinn autorisasjon &lt;application-component&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>[Torget]
Autorisasjonskomponenten i Altinn som gir muligheter til å delegere rettigheter til andre organisasjoner eller personer. Rettigheter til bruk av autorisasjonskomponenten baserer seg på registrerte roller i Enhetsregisteret.
Altinn autorisasjon leverer også tjenester for å registrere og kontrollere samtykke gitt av person eller virksomhet.</simpara><simpara>[Verktøykasse for deling av data]
Altinn autorisasjon gir teknisk samhandlingsevne ved at bruker logger inn med elektronisk ID,
autorisasjonskomponenten sjekker at bruker har de tilgangene som kreves for å ta i bruk aktuell tjeneste.</simpara><simpara>Dersom en privatperson skal ta i bruk en tjeneste på vegne av en virksomhet, gjøres det et oppslag mot Enhetsregisteret for å bekrefte at personen har en rolle på vegne av virksomheten. Dette gir organisatorisk samhandlingsevne.</simpara><simpara>Mer om Altinn autorisasjon:
<link xl:href="https://www.altinndigital.no/produkter/styring-av-tilgang/">https://www.altinndigital.no/produkter/styring-av-tilgang/</link></simpara></entry>
</row>
</tbody>
</tgroup>
</table>
</article>