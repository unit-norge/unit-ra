<?xml version="1.0" encoding="UTF-8"?>
<?asciidoc-toc maxdepth="4"?>
<?asciidoc-numbered maxdepth="9"?>
<article xmlns="http://docbook.org/ns/docbook" xmlns:xl="http://www.w3.org/1999/xlink" version="5.0" xml:lang="en">
<info>
<title>Avgi data - løsningsmønster UHF</title>
<date>2021-02-17</date>
</info>
<simpara>En prosessflyt en tilbyder av data utfører for å svare på en dataforespørsel. Tilbyder mottar forespørsel om oppslag med et aksesstoken. Klienten som forespør autentiseres og token valideres. Eventuelt mer fin-granulert tilgangskontroll utføres og data returneres. Tilgang kontrolleres kun dersom det er snakk om et sikret API.</simpara>
<figure>
<title>Avgi data - løsningsmønster UHF</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/Avgi%20data%20-%20løsningsmønster%20UHF.png"/>
</imageobject>
<textobject><phrase>Avgi data - løsningsmønster UHF image</phrase></textobject>
</mediaobject>
</figure>
<table frame="all" rowsep="1" colsep="1">
<title>Elementer i view for Avgi data - løsningsmønster UHF</title>
<tgroup cols="2">
<colspec colname="col_1" colwidth="25*"/>
<colspec colname="col_2" colwidth="75*"/>
<thead>
<row>
<entry align="left" valign="top">Element</entry>
<entry align="left" valign="top">Beskrivelse</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>Egen autorisasjons-komponent &lt;application-component&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Komponent for å håndheve virksomhetens regler for tilgang.
Også kalt policy enforcement point (PEP).</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Altinn autorisasjon &lt;application-component&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>[Torget]
Autorisasjonskomponenten i Altinn som gir muligheter til å delegere rettigheter til andre organisasjoner eller personer. Rettigheter til bruk av autorisasjonskomponenten baserer seg på registrerte roller i Enhetsregisteret.
Altinn autorisasjon leverer også tjenester for å registrere og kontrollere samtykke gitt av person eller virksomhet.</simpara><simpara>[Verktøykasse for deling av data]
Altinn autorisasjon gir teknisk samhandlingsevne ved at bruker logger inn med elektronisk ID,
autorisasjonskomponenten sjekker at bruker har de tilgangene som kreves for å ta i bruk aktuell tjeneste.</simpara><simpara>Dersom en privatperson skal ta i bruk en tjeneste på vegne av en virksomhet, gjøres det et oppslag mot Enhetsregisteret for å bekrefte at personen har en rolle på vegne av virksomheten. Dette gir organisatorisk samhandlingsevne.</simpara><simpara>Mer om Altinn autorisasjon:
<link xl:href="https://www.altinndigital.no/produkter/styring-av-tilgang/">https://www.altinndigital.no/produkter/styring-av-tilgang/</link></simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Datatilbyder &lt;business-role&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Tilbyder av data til andre aktører.</simpara><simpara>Datatibyder har definisjonsrett og har rettigheter til å behandle data
Datatilbyder kan sette sammen data som tilbyderen har til et dataprodukt som tilbys datakonsumenter gjennom et API</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Tilgangskontroll-tjeneste &lt;application-service&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Tjeneste for å sjekke rettigheter til data. Kan være eksterne eller interne tjenester. Disse rettigheter kan være mer finkornet enn tilgangene administrert av autorisasjonstjeneren.
Eksempler på rettigheter kan komme av samtykker fra person eller virksomhet, eller rollebasert fra vergemål, familierelasjon el.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Avgi forespurte data gjennom API &lt;business-process&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Prosessen med å avgi data på forespørsel gjennom et egnet API.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Motta  forespørsel om oppslag &lt;business-process&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Motta forespørsler fra API-konsument om å avgi data.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Avgi data &lt;business-process&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Prosessen med å gi svar på forespørselen.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Kontroller tilgang &lt;business-process&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Kontroll og håndheving av konsumentens rettigheter til å få forespurte data.  I tillegg til "validering av sikkerhetsbillett", kan det være behov for kontroll mot virksomhetsinterne policies.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Autentisere konsument &lt;business-process&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Prosessen med å autentisere en konsument.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Datautvekslings-tjeneste &lt;application-service&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Tjeneste for utveksling av data over aktuell transportprotokoll, f.eks, gjennom asynkrone medlinger eller synkrone API-oppslag.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Datautvekslings-tjeneste &lt;application-service&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Tjeneste for utveksling av data over aktuell transportprotokoll, f.eks, gjennom asynkrone medlinger eller synkrone API-oppslag.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Tokenvaliderings-tjeneste &lt;application-service&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Tjeneste som benyttes av tilbyder for å validere og kontrollere autentisiteten til et OAUTH2 token fra Maskinporten</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>Avgi data &lt;capability&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>Evne til å avgi data på forespørsel. Kan omfatte tilgangsstyring.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>API Gateway hos datatilbyder / OAuth resource server &lt;application-component&gt;</simpara></entry>
<entry align="left" valign="top"><simpara>API gateway beskytter ressurser og monitorerer tilgang.
Den håndhever tilgangsstyring ved å validere aksesstokens og utfører eventuell fin-granulert tilgangskontroll.
Den håndhever også volumbegrenseninger og samler data om bruken av APIer (logging).</simpara><simpara>Komponent som beskytter ressursene og monitorerer tilgang inklusivt:</simpara><simpara>  *  Validere tilgangstoken
  *  Beskytte mot inntrenging og andre trusler
  * Håndtere volumbegrensninger og andre abonnementsordninger
  * Håndheve tilgangsstyring
  * Samle inn data om bruken av API-er
  * Orkestrering mellom interntjenester</simpara></entry>
</row>
</tbody>
</tgroup>
</table>
</article>