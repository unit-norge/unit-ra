= Innhente data - løsningsmønster UHF
:wysiwig_editing: 1
ifeval::[{wysiwig_editing} == 1]
:imagepath: ../images/
endif::[]
ifeval::[{wysiwig_editing} == 0]
:imagepath: main@unit-ra:unit-ra-datadeling-datautveksling:
endif::[]
:toc: left
:experimental:
:toclevels: 4
:sectnums:
:sectnumlevels: 9

En prosessflyt en konsument utfører når det utføres et tjenestekall for å innhente data gjennom et API. API-adressen hentes i API-katalogen. Tilgang til APIet byttes inn mot et kjøretids-token i autoriseringstjenesten. Tjenestekall til APIet utføres gjennom API gateway der tokenet benyttes for å få tilgang. Dersom det er et åpent API er det kun relevante prossessteg som utføres.


.Innhente data - løsningsmønster UHF
image::{imagepath}Innhente data - løsningsmønster UHF.png[alt=Innhente data - løsningsmønster UHF image]


TIP: Gå tilbake til standardvisning ved å klikke 'tilbake' (eller lukk dette vinduet om det er nytt)


[cols ="1,3", options="header"]
.Elementer i view for Innhente data - løsningsmønster UHF
|===

| Element
| Beskrivelse

| UHF Infrastruktur
a| 

| Datautvekslings-tjeneste
a| Tjeneste for utveksling av data over aktuell transportprotokoll, f.eks, gjennom asynkrone medlinger eller synkrone API-oppslag.

| Samtykkeregistererings-tjeneste
a| Tjeneste for å innhente samtykke fra den registrert som dataene gjelder. Dette kan være en person eller en virksomhet.

| Adressetjeneste
a| Tjeneste som gir mulighet til å slå opp teknisk endepunkt

| Virksomhetssertifikat
a| En virksomhets elektroniske ID. Benyttes for å autentisere virksomheten overfor tokentjenesten.

| Tokentjeneste
a| Tjeneste som utsteder sikkerhetsbilletter. Sikkerhetsbillett utstedes basert på tildelte rettigheter og eventuelle representasjonsforhold.

| Oppslag representasjons-forhold
a| Tjeneste som benyttes av tokentjenesten for å kontrollere om det foreligger et delegert representasjonsforhold fra konsument til leverendør i autorisasjonstjenesten til Altinn.

| Tilganger konsument
a| Oversikt over hvilke API og OAUTH-scopes en virksomhet (representert ved organisasjonsnummer) skal ha tilgang til (utstedt token for).

| UHF autorisasjonstjener
a| Autorisasjonstjenester realiserer tilgangskontroll
gjennom å utstede sikkerhetsbilletter. En autorisasjonstjener er også
brukt til å realisere autorisasjonspolicy for tilgang og roller




| UHF API katalog
a| Oversikt over alle API som er registrert i UH/F sektoren

UH/F API katalog kan inneholde

  * Navn på API
  * Tekstlig beskrivelse av API
  * Informasjonsmodell / Datamodell for API som tilbys 
  * Kildeinformasjon for data, begrepsinformasjon
  * Eksempelkode, interaktiv API-konsoll og sandkasse for test
  * Informasjon om hvordan få support og hjelp fra utsteder
 * Informasjon om tilgang, juridiske og tekniske begrensinger for bruk. Inkluderer hvilke rettighetter (OAuth2 scopes) en konsument kan få til et API.
 * Grensesnitt for å presentere APIer
 * Grensesnitt for å søke etter APIer

| Endepunkt (adresse)
a| Dataobjekt som representerer teknisk adresse til et API eller ressurs.

| Nasjonal Infrastruktur
a| 

| Maskinporten
a| Maskinporten sørger for sikker autentisering og tilgangskontroll for datautveksling mellom
virksomheter, maskin til maskin. Dette gir teknisk og organisatorisk samhandlingsevne.

Mer om Maskinporten:
https://www.digdir.no/digitale-felleslosninger/maskinporten/869

| Datakonsument
a| Den som innhenter eller mottar data fra andre aktører.

| Innhente data
a| Evnen til å innhente data fra en annen aktør.

| Slå opp data gjennom et API 
a| Prosessen med å slå opp og hente data gjennom et API.

| Hent teknisk endepunkt ved behov
a| Prosessen å slå opp den tekniske adressen til et API før datatilgang gjennom API-et. Gjøres kun dersom det er nødvendig.

| Be om tilgangstoken
a| Prosessen med å benytte en sikkerhetsbillettjeneste for hente en sikkerhetsbillett som gir tilgang til et API. Dette forutsetter at alt er registert og satt opp riktig mot de aktuelle tjenestene.

| Utfør tjenestekall for innhenting av data
a| Prosessen med å benytte (gjøre et oppslag mot) et eksternt API.

| Innhent samtykke ved behov
a| Prosess for å innhente samtykke fra person eller virksomhet som grunnlag for å innhente data. Dette gjøres kun ved behov.

| Junction
a| 

| Junction
a| 

| Altinn autorisasjon
a| [Torget]
Autorisasjonskomponenten i Altinn som gir muligheter til å delegere rettigheter til andre organisasjoner eller personer. Rettigheter til bruk av autorisasjonskomponenten baserer seg på registrerte roller i Enhetsregisteret.
Altinn autorisasjon leverer også tjenester for å registrere og kontrollere samtykke gitt av person eller virksomhet.

[Verktøykasse for deling av data]
Altinn autorisasjon gir teknisk samhandlingsevne ved at bruker logger inn med elektronisk ID,
autorisasjonskomponenten sjekker at bruker har de tilgangene som kreves for å ta i bruk aktuell tjeneste.

Dersom en privatperson skal ta i bruk en tjeneste på vegne av en virksomhet, gjøres det et oppslag mot Enhetsregisteret for å bekrefte at personen har en rolle på vegne av virksomheten. Dette gir organisatorisk samhandlingsevne.

Mer om Altinn autorisasjon:
https://www.altinndigital.no/produkter/styring-av-tilgang/

| Felles API-katalog
a| Del av Felles datakatalog som gir mulighet for å søke etter API-er og lese API-spesifikasjoner https://fellesdatakatalog.brreg.no/apis

| Altinn autorisasjon
a| [Torget]
Autorisasjonskomponenten i Altinn som gir muligheter til å delegere rettigheter til andre organisasjoner eller personer. Rettigheter til bruk av autorisasjonskomponenten baserer seg på registrerte roller i Enhetsregisteret.
Altinn autorisasjon leverer også tjenester for å registrere og kontrollere samtykke gitt av person eller virksomhet.

[Verktøykasse for deling av data]
Altinn autorisasjon gir teknisk samhandlingsevne ved at bruker logger inn med elektronisk ID,
autorisasjonskomponenten sjekker at bruker har de tilgangene som kreves for å ta i bruk aktuell tjeneste.

Dersom en privatperson skal ta i bruk en tjeneste på vegne av en virksomhet, gjøres det et oppslag mot Enhetsregisteret for å bekrefte at personen har en rolle på vegne av virksomheten. Dette gir organisatorisk samhandlingsevne.

Mer om Altinn autorisasjon:
https://www.altinndigital.no/produkter/styring-av-tilgang/

|===
****
TIP: Gå tilbake til standardvisning ved å klikke 'tilbake' (eller lukk dette vinduet om det er nytt)
****


